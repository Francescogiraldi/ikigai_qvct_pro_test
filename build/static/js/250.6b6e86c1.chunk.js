"use strict";(self.webpackChunkikigai_app_new=self.webpackChunkikigai_app_new||[]).push([[250],{7250:(e,s,t)=>{t.r(s),t.d(s,{default:()=>l});var n=t(5043),i=t(3605),o=t(3546),a=t(3271),r=t(579);const l=e=>{let{useLocalMode:s=!1,predefinedResponses:l=[]}=e;const[c,u]=(0,n.useState)(!1),[d,m]=(0,n.useState)(!1),[p,h]=(0,n.useState)([{role:"assistant",content:"Bonjour ! Je suis votre assistant IKIGAI. Comment puis-je vous aider aujourd'hui ?"}]),[x,v]=(0,n.useState)(""),f=(0,n.useRef)(null),[g,y]=(0,n.useState)(null),b=l.length>0?l:["Le concept d'IKIGAI est un sch\xe9ma japonais qui vous aide \xe0 trouver votre raison d'\xeatre en identifiant ce que vous aimez, ce en quoi vous \xeates bon, ce pour quoi vous pouvez \xeatre pay\xe9 et ce dont le monde a besoin.","La m\xe9ditation est une excellente pratique pour r\xe9duire le stress et am\xe9liorer votre bien-\xeatre mental. Essayez de commencer par 5 minutes par jour.","Pour am\xe9liorer votre \xe9quilibre vie professionnelle/personnelle, essayez de d\xe9finir des limites claires et de prendre du temps pour des activit\xe9s qui vous ressourcent.","L'activit\xe9 physique r\xe9guli\xe8re est un pilier important du bien-\xeatre. M\xeame une marche quotidienne de 30 minutes peut faire une grande diff\xe9rence.","La gratitude est une pratique puissante pour am\xe9liorer votre bien-\xeatre. Essayez de noter trois choses pour lesquelles vous \xeates reconnaissant chaque jour.","Une bonne alimentation est fondamentale pour votre bien-\xeatre. Essayez d'incorporer plus de fruits, l\xe9gumes et aliments complets dans votre r\xe9gime.","Le sommeil est essentiel pour votre sant\xe9 mentale et physique. Visez 7-8 heures de sommeil de qualit\xe9 chaque nuit.","Les connections sociales positives sont importantes pour votre bien-\xeatre. Prenez le temps de cultiver des relations qui vous soutiennent et vous inspirent."],[w,j]=(0,n.useState)(!1),N=s||w;(0,n.useEffect)((()=>{N||g||(async()=>{if(!N)try{const e=(await t.e(528).then(t.bind(t,8528))).Client,s=a.WF.chatbot.apiEndpoint;console.log("Tentative de connexion \xe0 l'API Gradio:",s);const n=await e.connect(s);y(n),console.log("Connexion au client Gradio r\xe9ussie")}catch(e){console.error("Erreur de connexion au client Gradio:",e),j(!0),h((e=>[...e,{role:"assistant",content:"Je suis actuellement en mode hors ligne. Je vais utiliser mes connaissances locales pour vous aider."}]))}})()}),[s,w,N,g]),(0,n.useEffect)((()=>{f.current&&f.current.scrollIntoView({behavior:"smooth"})}),[p]);const I=async()=>{if(!x.trim())return;const e={role:"user",content:x},s=x;if(h((s=>[...s,e])),v(""),m(!0),N)try{setTimeout((()=>{const e=b[Math.floor(Math.random()*b.length)];h((s=>[...s,{role:"assistant",content:e}])),m(!1)}),1e3)}catch(n){console.error("Erreur inattendue en mode local:",n),h((e=>[...e,{role:"assistant",content:"Je suis d\xe9sol\xe9, une erreur s'est produite. Veuillez r\xe9essayer."}])),m(!1)}else try{if(g){const e=a.WF.chatbot.systemPrompt;console.log("Envoi du message \xe0 Gradio:",s);const t=await g.predict(0,[s,e]);if(console.log("R\xe9ponse de l'API Gradio:",t),!t||!t.data)throw new Error("R\xe9ponse Gradio invalide");h((e=>[...e,{role:"assistant",content:Array.isArray(t.data)&&t.data.length>0?t.data[0]:"string"===typeof t.data?t.data:"Je suis d\xe9sol\xe9, je n'ai pas pu g\xe9n\xe9rer une r\xe9ponse. Veuillez r\xe9essayer."}]))}else try{const e=(await t.e(528).then(t.bind(t,8528))).Client,s=a.WF.chatbot.apiEndpoint;console.log("Tentative de connexion \xe0 l'API Gradio:",s);const n=await e.connect(s);return y(n),console.log("Connexion au client Gradio r\xe9ussie"),void setTimeout((()=>{h((e=>[...e,{role:"assistant",content:"Connexion \xe9tablie. Comment puis-je vous aider ?"}])),m(!1)}),1e3)}catch(n){console.error("Impossible d'initialiser le client Gradio:",n),j(!0),h((e=>[...e,{role:"assistant",content:"Je ne peux pas me connecter \xe0 l'API en ce moment. Je vais passer en mode hors ligne pour vous aider avec mes connaissances locales."}]))}}catch(n){console.error("Erreur lors de l'appel \xe0 l'API:",n),j(!0),h((e=>[...e,{role:"assistant",content:"D\xe9sol\xe9, je rencontre des difficult\xe9s avec ma connexion. Je vais passer en mode hors ligne pour continuer \xe0 vous aider."}]))}finally{m(!1)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.P.button,{className:"fixed bottom-20 right-5 w-14 h-14 rounded-full bg-blue-500 text-white shadow-lg flex items-center justify-center text-2xl z-30",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u(!0),initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:"\ud83d\udcac"}),(0,r.jsx)(o.N,{children:c&&(0,r.jsx)(i.P.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>u(!1),children:(0,r.jsxs)(i.P.div,{className:"bg-white rounded-2xl shadow-xl w-full max-w-md h-[500px] flex flex-col overflow-hidden",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center px-4 py-3 bg-blue-500 text-white",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-xl mr-2",children:"\ud83e\udd16"}),(0,r.jsx)("span",{className:"font-bold",children:"Assistant IKIGAI"})]}),(0,r.jsx)("button",{className:"text-white hover:bg-blue-600 rounded-full w-8 h-8 flex items-center justify-center",onClick:()=>u(!1),children:"\u2715"})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:[p.map(((e,s)=>(0,r.jsx)("div",{className:"mb-3 flex "+("user"===e.role?"justify-end":"justify-start"),children:(0,r.jsx)("div",{className:"max-w-[80%] p-3 rounded-lg "+("user"===e.role?"bg-blue-500 text-white rounded-tr-none":"bg-white text-gray-800 shadow-sm rounded-tl-none"),children:e.content})},s))),d&&(0,r.jsx)("div",{className:"flex justify-start mb-3",children:(0,r.jsx)("div",{className:"bg-white p-3 rounded-lg shadow-sm rounded-tl-none",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"0ms"}}),(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"200ms"}}),(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"400ms"}})]})})}),(0,r.jsx)("div",{ref:f})]}),(0,r.jsxs)("div",{className:"border-t p-3 bg-white",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("textarea",{className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"\xc9crivez votre message...",rows:"2",value:x,onChange:e=>v(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),I())}}),(0,r.jsx)(i.P.button,{className:"ml-2 bg-blue-500 text-white rounded-full w-10 h-10 flex items-center justify-center",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:I,disabled:d||!x.trim(),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),(0,r.jsx)("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-2 text-center",children:[N?"Assistant IKIGAI (Mode hors ligne)":"Propuls\xe9 par Gradio API",w&&" - Basculement automatique en mode hors ligne"]})]})]})})})]})}}}]);
//# sourceMappingURL=250.6b6e86c1.chunk.js.map